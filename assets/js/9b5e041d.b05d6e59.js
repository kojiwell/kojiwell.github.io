"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5867],{1670:(e,l,n)=>{n.r(l),n.d(l,{assets:()=>r,contentTitle:()=>t,default:()=>a,frontMatter:()=>c,metadata:()=>i,toc:()=>d});var o=n(4848),s=n(8453);const c={id:"clush",title:"ClusterShell",sidebar_label:"ClusterShell"},t=void 0,i={id:"optional/clush",title:"ClusterShell",description:"Install ClusterShell",source:"@site/docs/optional/clush.md",sourceDirName:"optional",slug:"/optional/clush",permalink:"/docs/optional/clush",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{id:"clush",title:"ClusterShell",sidebar_label:"ClusterShell"},sidebar:"notesSidebar",previous:{title:"Optional",permalink:"/docs/category/optional"},next:{title:"Docusaurus",permalink:"/docs/optional/docusaurus"}},r={},d=[{value:"Install ClusterShell",id:"install-clustershell",level:2},{value:"Example of configuration files",id:"example-of-configuration-files",level:2},{value:"clush.conf",id:"clushconf",level:3},{value:"groups.conf",id:"groupsconf",level:3},{value:"groups.d/local.cfg",id:"groupsdlocalcfg",level:3},{value:"Commands",id:"commands",level:2},{value:"Run a command on multiple nodes",id:"run-a-command-on-multiple-nodes",level:3},{value:"Copy a file to multiple nodes",id:"copy-a-file-to-multiple-nodes",level:3},{value:"Tips",id:"tips",level:2},{value:"Set a different config directory.",id:"set-a-different-config-directory",level:3}];function u(e){const l={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(l.h2,{id:"install-clustershell",children:"Install ClusterShell"}),"\n",(0,o.jsx)(l.pre,{children:(0,o.jsx)(l.code,{children:"# Ubuntu\napt install clustershell\n\n# Rocky\ndnf install clustershell\n\n# macOS\npip3 install ClusterShell\n"})}),"\n",(0,o.jsx)(l.h2,{id:"example-of-configuration-files",children:"Example of configuration files"}),"\n",(0,o.jsxs)(l.p,{children:["Although you can use ",(0,o.jsx)(l.code,{children:"clush"})," by default, but here's the list configuration files\nyou should know. Especially, the ",(0,o.jsx)(l.code,{children:"/etc/clustershell/groups.d/local.cfg"})," where you\ncan add groups of nodes as you need."]}),"\n",(0,o.jsxs)(l.ul,{children:["\n",(0,o.jsx)(l.li,{children:"/etc/clustershell/clush.conf"}),"\n",(0,o.jsx)(l.li,{children:"/etc/clustershell/groups.conf"}),"\n",(0,o.jsx)(l.li,{children:"/etc/clustershell/groups.d/local.cfg"}),"\n"]}),"\n",(0,o.jsx)(l.h3,{id:"clushconf",children:"clush.conf"}),"\n",(0,o.jsx)(l.pre,{children:(0,o.jsx)(l.code,{children:"[Main]\nfanout: 64\nconnect_timeout: 15\ncommand_timeout: 0\ncolor: auto\nfd_max: 8192\nhistory_size: 100\nmaxrc: no\nnode_count: yes\nverbosity: 1\nconfdir: /etc/clustershell/clush.conf.d $CFGDIR/clush.conf.d\n\n# Add always all remote hosts to known_hosts without confirmation\n#ssh_user: root\n#ssh_path: /usr/bin/ssh\n#ssh_options: -oStrictHostKeyChecking=no\n"})}),"\n",(0,o.jsx)(l.h3,{id:"groupsconf",children:"groups.conf"}),"\n",(0,o.jsx)(l.pre,{children:(0,o.jsx)(l.code,{className:"language-[Main]",children:"default: local\nconfdir: /etc/clustershell/groups.conf.d $CFGDIR/groups.conf.d\nautodir: /etc/clustershell/groups.d $CFGDIR/groups.d\n\n[local]\nmap: [ -f $CFGDIR/groups ] && f=$CFGDIR/groups || f=$CFGDIR/groups.d/local.cfg; sed -n 's/^$GROUP:\\(.*\\)/\\1/p' $f\nall: [ -f $CFGDIR/groups ] && f=$CFGDIR/groups || f=$CFGDIR/groups.d/local.cfg; sed -n 's/^all:\\(.*\\)/\\1/p' $f\nlist: [ -f $CFGDIR/groups ] && f=$CFGDIR/groups || f=$CFGDIR/groups.d/local.cfg; sed -n 's/^\\([0-9A-Za-z_-]*\\):.*/\\1/p' $f\n"})}),"\n",(0,o.jsx)(l.h3,{id:"groupsdlocalcfg",children:"groups.d/local.cfg"}),"\n",(0,o.jsx)(l.pre,{children:(0,o.jsx)(l.code,{children:"group1: node_a[01-10],node_b[01-05]\ngroup2: node_c[01-05],node_d[01-03]\n"})}),"\n",(0,o.jsx)(l.h2,{id:"commands",children:"Commands"}),"\n",(0,o.jsx)(l.h3,{id:"run-a-command-on-multiple-nodes",children:"Run a command on multiple nodes"}),"\n",(0,o.jsx)(l.pre,{children:(0,o.jsx)(l.code,{children:"clush -w node[01-32,64-96] uptime\n"})}),"\n",(0,o.jsx)(l.h3,{id:"copy-a-file-to-multiple-nodes",children:"Copy a file to multiple nodes"}),"\n",(0,o.jsx)(l.pre,{children:(0,o.jsx)(l.code,{children:"clush -w node[01-96] -c /path/to/file\n"})}),"\n",(0,o.jsx)(l.h2,{id:"tips",children:"Tips"}),"\n",(0,o.jsx)(l.h3,{id:"set-a-different-config-directory",children:"Set a different config directory."}),"\n",(0,o.jsx)(l.pre,{children:(0,o.jsx)(l.code,{children:"export CLUSTERSHELL_CFGDIR=$HOME/.config/clustershell\n"})})]})}function a(e={}){const{wrapper:l}={...(0,s.R)(),...e.components};return l?(0,o.jsx)(l,{...e,children:(0,o.jsx)(u,{...e})}):u(e)}},8453:(e,l,n)=>{n.d(l,{R:()=>t,x:()=>i});var o=n(6540);const s={},c=o.createContext(s);function t(e){const l=o.useContext(c);return o.useMemo(function(){return"function"==typeof e?e(l):{...l,...e}},[l,e])}function i(e){let l;return l=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),o.createElement(c.Provider,{value:l},e.children)}}}]);